[gd_scene load_steps=9 format=3 uid="uid://sypkde2dh03l"]

[ext_resource type="Script" uid="uid://c4r1hrx8qu7ow" path="res://combat_scene.gd" id="1_ik0t7"]
[ext_resource type="PackedScene" uid="uid://s07iojy5t6ma" path="res://scenes/improvise_modal.tscn" id="2_m17q1"]
[ext_resource type="PackedScene" uid="uid://xwpyp145arbu" path="res://scenes/player_hand.tscn" id="2_ofoda"]
[ext_resource type="Script" uid="uid://cxh1b2deka5hc" path="res://resources/scripts/temporary_card_pool.gd" id="4_a2e2y"]
[ext_resource type="Script" uid="uid://cu0v44uefllb1" path="res://scenes/player_actor.gd" id="5_m2d54"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_m17q1"]
bg_color = Color(0.40862, 0.605553, 0.88977, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_ofoda"]
bg_color = Color(0.443303, 0.411944, 0.518347, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_m2d54"]

[node name="CombatScene" type="Node2D"]
script = ExtResource("1_ik0t7")

[node name="PlayerHand" parent="." instance=ExtResource("2_ofoda")]
anchors_preset = 0
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = 122.0
offset_top = 388.0
offset_right = 1186.0
offset_bottom = 592.0
grow_horizontal = 1
grow_vertical = 1

[node name="CardContainer" parent="PlayerHand" index="0"]
anchor_left = 0.00306383
anchor_top = 1.836
anchor_right = 0.996936
anchor_bottom = 3.92943
offset_left = -48.456
offset_top = -539.544
offset_right = -49.5441
offset_bottom = -539.776

[node name="EnergyLabel" type="Label" parent="."]
offset_left = 11.0
offset_top = 599.0
offset_right = 69.0
offset_bottom = 644.0
theme_override_font_sizes/font_size = 32
text = "Energy: 3/3"

[node name="EndTurnButton" type="Button" parent="."]
offset_left = 997.0
offset_top = 590.0
offset_right = 1144.0
offset_bottom = 643.0
theme_override_font_sizes/font_size = 32
text = "End Turn"

[node name="VictoryModal" type="Panel" parent="."]
visible = false
z_index = 5
offset_left = 279.0
offset_top = 150.0
offset_right = 906.0
offset_bottom = 457.0
theme_override_styles/panel = SubResource("StyleBoxFlat_m17q1")

[node name="VBoxContainer" type="VBoxContainer" parent="VictoryModal"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -42.5
offset_top = -28.5
offset_right = 39.5
offset_bottom = 29.5
grow_horizontal = 2
grow_vertical = 2

[node name="ModalLabel" type="Label" parent="VictoryModal/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 48
text = "VICTORY"
horizontal_alignment = 1

[node name="Continue" type="Button" parent="VictoryModal/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 32
text = "Continue"

[node name="Enemies" type="Node2D" parent="."]
position = Vector2(962, 280)

[node name="DrawPile" type="Button" parent="."]
offset_left = 29.0
offset_top = 530.0
offset_right = 111.0
offset_bottom = 561.0
text = "Draw Pile"

[node name="DiscardPile" type="Button" parent="."]
offset_left = 1035.0
offset_top = 539.0
offset_right = 1134.0
offset_bottom = 570.0
text = "Discard Pile"

[node name="DrawPileModal" type="Panel" parent="."]
visible = false
z_index = 8
offset_left = 18.0
offset_top = 55.0
offset_right = 1135.0
offset_bottom = 635.0
theme_override_styles/panel = SubResource("StyleBoxFlat_ofoda")

[node name="ScrollContainer" type="ScrollContainer" parent="DrawPileModal"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = -57.0
grow_horizontal = 2
grow_vertical = 2

[node name="DrawCardGrid" type="GridContainer" parent="DrawPileModal/ScrollContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
columns = 6

[node name="Close" type="Button" parent="DrawPileModal"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -23.5
offset_top = -41.0
offset_right = 24.5
offset_bottom = -10.0
grow_horizontal = 2
grow_vertical = 0
text = "Close"

[node name="DiscardPileModal" type="Panel" parent="."]
visible = false
z_index = 8
offset_left = 18.0
offset_top = 55.0
offset_right = 1135.0
offset_bottom = 635.0
theme_override_styles/panel = SubResource("StyleBoxFlat_ofoda")

[node name="ScrollContainer" type="ScrollContainer" parent="DiscardPileModal"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = -47.0
grow_horizontal = 2
grow_vertical = 2

[node name="DiscardCardGrid" type="GridContainer" parent="DiscardPileModal/ScrollContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
columns = 6

[node name="Close" type="Button" parent="DiscardPileModal"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -23.5
offset_top = -41.0
offset_right = 24.5
offset_bottom = -10.0
grow_horizontal = 2
grow_vertical = 0
text = "Close"

[node name="TemporaryCardPool" type="Node" parent="."]
script = ExtResource("4_a2e2y")

[node name="ImproviseModal" parent="." instance=ExtResource("2_m17q1")]
visible = false
custom_minimum_size = Vector2(100, 100)
anchors_preset = 0
anchor_right = 0.0
anchor_bottom = 0.0
offset_right = 1152.0
offset_bottom = 648.0
grow_horizontal = 1
grow_vertical = 1

[node name="Panel" parent="ImproviseModal" index="0"]
custom_minimum_size = Vector2(100, 100)

[node name="PlayerActor" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("5_m2d54")

[node name="Area2D" type="Area2D" parent="PlayerActor"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="PlayerActor/Area2D"]
position = Vector2(168, 278)
shape = SubResource("RectangleShape2D_m2d54")

[node name="StatusEffectsLabel" type="Label" parent="."]
unique_name_in_owner = true
offset_left = 147.0
offset_top = 292.0
offset_right = 187.0
offset_bottom = 315.0

[node name="BlockLabel" type="Label" parent="."]
unique_name_in_owner = true
offset_left = 147.0
offset_top = 240.0
offset_right = 187.0
offset_bottom = 263.0

[connection signal="pressed" from="EndTurnButton" to="." method="_on_end_turn_button_pressed"]
[connection signal="pressed" from="VictoryModal/VBoxContainer/Continue" to="." method="_on_continue_pressed"]
[connection signal="pressed" from="DrawPile" to="." method="_on_draw_pile_pressed"]
[connection signal="pressed" from="DiscardPile" to="." method="_on_dicard_pile_pressed"]
[connection signal="pressed" from="DrawPileModal/Close" to="." method="_on_close_pressed"]
[connection signal="pressed" from="DiscardPileModal/Close" to="." method="_on_close_pressed"]

[editable path="PlayerHand"]
[editable path="ImproviseModal"]
